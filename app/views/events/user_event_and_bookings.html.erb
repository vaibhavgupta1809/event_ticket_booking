<div class="container mt-5">
  <div class="row">
    <div class="col">
      <!-- Flash Notice -->
      <% if notice %>
        <div class="alert alert-success" role="alert">
          <%= notice %>
        </div>
      <% end %>

      <!-- Page Heading -->
      <h1 class="mb-4">My Events</h1>

      <!-- Link to Create New Event -->

      <!-- Events Display -->
      <div id="events" class="row">
        <p class="mb-10 text-danger"><%= "you have not created any events yet.." if @my_events.count == 0%></p>
        <% @my_events.each do |event| %>
          <div class="col-md-4 mb-3">
            <div class="card">
              <div class="card-body">
                <div id="<%= dom_id(event) %>" class="card mb-3">
                  <div class="card-header">
                    Event Details
                  </div>
                  <div class="card-body">
                    <h5 class="card-title"><%= event.name %></h5>
                    <p class="card-text">
                      <strong>Description:</strong>
                      <%= event.description %>
                    </p>
                    <p class="card-text">
                      <strong>Location:</strong>
                      <%= event.location %>
                    </p>
                    <p class="card-text">
                      <strong>Event date:</strong>
                      <%= l(event.event_date, format: :long) %>
                    </p>
                    <p class="card-text">
                      <strong>Total tickets:</strong>
                      <%= event.total_tickets %>
                    </p>
                    <p class="card-text">
                      <strong>Available tickets:</strong>
                      <%= event.total_tickets - event.bookings.sum(:ticket_quantity) %>
                    </p>
                  </div>
                  <div class="card-footer bg-transparent">
                    <%= link_to 'Book Tickets', new_booking_path(event_id: event.id), class: 'btn btn-secondary' %>
                    <div class="btn-group" role="group" aria-label="Event Actions">
                      <%= link_to edit_event_path(event), class: "btn btn-warning me-2" do %>
                        <i class="bi bi-pencil-fill"></i>
                      <% end %>
                      <%= button_to event, method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger" do %>
                        <i class="bi bi-trash-fill"></i>
                      <% end %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>

      <h1 class="mb-4">My Booking</h1>

      <!-- Link to Create New Event -->

      <!-- Events Display -->
      <div id="events" class="row">
      <p class="mb-10 text-danger"><%= "No bookings" if @bookings.count == 0%></p>
        <% @bookings.each do |booking| %>
          <div class="col-md-4 mb-3">
            <div class="card">
              <div class="card-body">
                <div class="card-body">
                  <h5 class="card-title"><%= booking.event.name %></h5>
                  <p class="card-text">
                    <strong>Description:</strong>
                    <%= booking.event.description %>
                  </p>
                  <p class="card-text">
                    <strong>Location:</strong>
                    <%= booking.event.location %>
                  </p>
                  <p class="card-text">
                    <strong>Event date:</strong>
                    <%= l(booking.event.event_date, format: :long) %>
                  </p>
                  <p class="card-text">
                    <strong>ticket quantity:</strong>
                    <%= booking.ticket_quantity %>
                  </p>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>